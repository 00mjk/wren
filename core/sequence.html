<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
<title>Sequence Class â€“ Wren</title>
<link rel="stylesheet" type="text/css" href="../style.css" />
<link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,400italic,700italic|Source+Code+Pro:400|Lato:400|Sanchez:400italic,400' rel='stylesheet' type='text/css'>
<!-- Tell mobile browsers we're optimized for them and they don't need to crop
     the viewport. -->
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
</head>
<body id="top" class="core">
<header>
  <div class="page">
    <div class="main-column">
      <h1><a href="../">wren</a></h1>
      <h2>a classy little scripting language</h2>
    </div>
  </div>
</header>
<div class="page">
  <nav>
    <ul>
      <li><a href="./">Core Library</a></li>
    </ul>
    <section>
      <h2>core classes</h2>
      <ul>
        <li><a href="bool.html">Bool</a></li>
        <li><a href="class.html">Class</a></li>
        <li><a href="fiber.html">Fiber</a></li>
        <li><a href="fn.html">Fn</a></li>
        <li><a href="list.html">List</a></li>
        <li><a href="map.html">Map</a></li>
        <li><a href="null.html">Null</a></li>
        <li><a href="num.html">Num</a></li>
        <li><a href="object.html">Object</a></li>
        <li><a href="range.html">Range</a></li>
        <li><a href="sequence.html">Sequence</a></li>
        <li><a href="string.html">String</a></li>
        <li><a href="io.html">IO</a></li>
      </ul>
    </section>
  </nav>
  <main>
    <h1>Sequence Class</h1>
    <p>An abstract base class for any iterable object. Any class that implements the
core <a href="../control-flow.html#the-iterator-protocol">iterator protocol</a> can extend this to get a number of helpful methods.</p>
<h2>Methods <a href="#methods" name="methods" class="header-anchor">#</a></h2>
<h3><strong>all</strong>(predicate) <a href="#all(predicate)" name="all(predicate)" class="header-anchor">#</a></h3>
<p>Tests whether all the elements in the sequence pass the <code>predicate</code>.</p>
<p>Iterates over the sequence, passing each element to the function <code>predicate</code>.
If it returns something <a href="../control-flow.html#truth">false</a>, stops iterating
and returns the value. Otherwise, returns <code>true</code>.</p>
<div class="codehilite"><pre><span class="p">[</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">].</span><span class="n">all</span> <span class="p">{</span><span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="m">2</span><span class="p">}</span> <span class="c1">// False.</span>
<span class="p">[</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">].</span><span class="n">all</span> <span class="p">{</span><span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="m">4</span><span class="p">}</span> <span class="c1">// True.</span>
</pre></div>


<h3><strong>any</strong>(predicate) <a href="#any(predicate)" name="any(predicate)" class="header-anchor">#</a></h3>
<p>Tests whether any element in the sequence passes the <code>predicate</code>.</p>
<p>Iterates over the sequence, passing each element to the function <code>predicate</code>.
If it returns something <a href="../control-flow.html#truth">true</a>, stops iterating and
returns that value. Otherwise, returns <code>false</code>.</p>
<div class="codehilite"><pre><span class="p">[</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">].</span><span class="n">any</span> <span class="p">{</span><span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="m">1</span><span class="p">}</span> <span class="c1">// False.</span>
<span class="p">[</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">].</span><span class="n">any</span> <span class="p">{</span><span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="m">2</span><span class="p">}</span> <span class="c1">// True.</span>
</pre></div>


<h3><strong>contains</strong>(element) <a href="#contains(element)" name="contains(element)" class="header-anchor">#</a></h3>
<p>Returns whether the sequence contains any element equal to the given element.</p>
<h3><strong>count</strong> <a href="#count" name="count" class="header-anchor">#</a></h3>
<p>The number of elements in the sequence.</p>
<p>Unless a more efficient override is available, this will iterate over the
sequence in order to determine how many elements it contains.</p>
<h3><strong>count</strong>(predicate) <a href="#count(predicate)" name="count(predicate)" class="header-anchor">#</a></h3>
<p>Returns the number of elements in the sequence that pass the <code>predicate</code>.</p>
<p>Iterates over the sequence, passing each element to the function <code>predicate</code>
and counting the number of times the returned value evaluates to <code>true</code>.</p>
<div class="codehilite"><pre><span class="p">[</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">].</span><span class="n">count</span> <span class="p">{</span><span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="m">2</span><span class="p">}</span> <span class="c1">// 1.</span>
<span class="p">[</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">].</span><span class="n">count</span> <span class="p">{</span><span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="m">4</span><span class="p">}</span> <span class="c1">// 3.</span>
</pre></div>


<h3><strong>each</strong>(function) <a href="#each(function)" name="each(function)" class="header-anchor">#</a></h3>
<p>Iterates over the sequence, passing each element to the given <code>function</code>.</p>
<div class="codehilite"><pre><span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;three&quot;</span><span class="p">].</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">word</span><span class="o">|</span> <span class="n">IO</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="p">}</span>
</pre></div>


<h3><strong>isEmpty</strong> <a href="#isempty" name="isempty" class="header-anchor">#</a></h3>
<p>Returns whether the sequence contains any elements.</p>
<p>This can be more efficient that <code>count == 0</code> because this does not iterate over
the entire sequence.</p>
<h3><strong>join</strong>(sep) <a href="#join(sep)" name="join(sep)" class="header-anchor">#</a></h3>
<p>Returns a string representation of the sequence. The string representations of
the elements in the sequence is concatenated with intervening occurrences of
<code>sep</code>.</p>
<p>It is a runtime error if <code>sep</code> is not a string.</p>
<h3><strong>join</strong> <a href="#join" name="join" class="header-anchor">#</a></h3>
<p>Calls <code>join</code> with the empty string as the separator.</p>
<h3><strong>map</strong>(transformation) <a href="#map(transformation)" name="map(transformation)" class="header-anchor">#</a></h3>
<p>Creates a new sequence that applies the <code>transformation</code> to each element in the
original sequence while it is iterated.</p>
<div class="codehilite"><pre><span class="kd">var</span> <span class="n">doubles</span> <span class="o">=</span> <span class="p">[</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">].</span><span class="n">map</span> <span class="p">{</span><span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="n">n</span> <span class="o">*</span> <span class="m">2</span> <span class="p">}</span>
<span class="k">for</span> <span class="p">(</span><span class="n">n</span> <span class="k">in</span> <span class="n">doubles</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">IO</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="c1">// &quot;2&quot;, &quot;4&quot;, &quot;6&quot;.</span>
<span class="p">}</span>
</pre></div>


<p>The returned sequence is <em>lazy</em>. It only applies the mapping when you iterate
over the sequence, and it does so by holding a reference to the original
sequence.</p>
<p>This means you can use <code>map(_)</code> for things like infinite sequences or sequences
that have side effects when you iterate over them. But it also means that
changes to the original sequence will be reflected in the mapped sequence.</p>
<p>To force eager evaluation, just call <code>.toList</code> on the result.</p>
<div class="codehilite"><pre><span class="kd">var</span> <span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">]</span>
<span class="kd">var</span> <span class="n">doubles</span> <span class="o">=</span> <span class="n">numbers</span><span class="p">.</span><span class="n">map</span> <span class="p">{</span><span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="n">n</span> <span class="o">*</span> <span class="m">2</span> <span class="p">}.</span><span class="n">toList</span>
<span class="n">numbers</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="m">4</span><span class="p">)</span>
<span class="n">IO</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">doubles</span><span class="p">)</span> <span class="c1">// [2, 4, 6].</span>
</pre></div>


<h3><strong>reduce</strong>(function) <a href="#reduce(function)" name="reduce(function)" class="header-anchor">#</a></h3>
<p>Reduces the sequence down to a single value. <code>function</code> is a function that
takes two arguments, the accumulator and sequence item and returns the new
accumulator value. The accumulator is initialized from the first item in the
sequence. Then, the function is invoked on each remaining item in the sequence,
iteratively updating the accumulator.</p>
<p>It is a runtime error to call this on an empty sequence.</p>
<h3><strong>reduce</strong>(seed, function) <a href="#reduce(seed,-function)" name="reduce(seed,-function)" class="header-anchor">#</a></h3>
<p>Similar to above, but uses <code>seed</code> for the initial value of the accumulator. If
the sequence is empty, returns <code>seed</code>.</p>
<h3><strong>toList</strong> <a href="#tolist" name="tolist" class="header-anchor">#</a></h3>
<p>Creates a <a href="list.html">list</a> containing all the elements in the sequence.</p>
<div class="codehilite"><pre><span class="p">(</span><span class="m">1.</span><span class="p">.</span><span class="m">3</span><span class="p">).</span><span class="n">toList</span>  <span class="c1">// [1, 2, 3].</span>
</pre></div>


<p>If the sequence is already a list, this creates a copy of it.</p>
<h3><strong>where</strong>(predicate) <a href="#where(predicate)" name="where(predicate)" class="header-anchor">#</a></h3>
<p>Creates a new sequence containing only the elements from the original sequence
that pass the <code>predicate</code>.</p>
<p>During iteration, each element in the original sequence is passed to the
function <code>predicate</code>. If it returns <code>false</code>, the element is skipped.</p>
<div class="codehilite"><pre><span class="kd">var</span> <span class="n">odds</span> <span class="o">=</span> <span class="p">(</span><span class="m">1.</span><span class="p">.</span><span class="m">10</span><span class="p">).</span><span class="n">where</span> <span class="p">{</span><span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="n">n</span> <span class="o">%</span> <span class="m">2</span> <span class="o">==</span> <span class="m">1</span> <span class="p">}</span>
<span class="k">for</span> <span class="p">(</span><span class="n">n</span> <span class="k">in</span> <span class="n">odds</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">IO</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="c1">// &quot;1&quot;, &quot;3&quot;, &quot;5&quot;, &quot;7&quot;, &quot;9&quot;.</span>
<span class="p">}</span>
</pre></div>


<p>The returned sequence is <em>lazy</em>. It only applies the filtering when you iterate
over the sequence, and it does so by holding a reference to the original
sequence.</p>
<p>This means you can use <code>where(_)</code> for things like infinite sequences or
sequences that have side effects when you iterate over them. But it also means
that changes to the original sequence will be reflected in the filtered
sequence.</p>
<p>To force eager evaluation, just call <code>.toList</code> on the result.</p>
<div class="codehilite"><pre><span class="kd">var</span> <span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">6</span><span class="p">]</span>
<span class="kd">var</span> <span class="n">odds</span> <span class="o">=</span> <span class="n">numbers</span><span class="p">.</span><span class="n">where</span> <span class="p">{</span><span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="n">n</span> <span class="o">%</span> <span class="m">2</span> <span class="o">==</span> <span class="m">1</span> <span class="p">}.</span><span class="n">toList</span>
<span class="n">numbers</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="m">7</span><span class="p">)</span>
<span class="n">IO</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">odds</span><span class="p">)</span> <span class="c1">// [1, 3, 5].</span>
</pre></div>
  </main>
</div>
<footer>
  <div class="page">
    <div class="main-column">
    <p>Wren lives <a href="https://github.com/munificent/wren">on GitHub</a> &mdash; Made with &#x2764; by <a href="http://journal.stuffwithstuff.com/">Bob Nystrom</a> and <a href="https://github.com/munificent/wren/blob/master/AUTHORS">friends</a>.</p>
    <div class="main-column">
  </div>
</footer>
</body>
</html>
